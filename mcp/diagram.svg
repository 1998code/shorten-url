<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" viewBox="0 0 800 800"><defs><style>.box{fill:#111827;stroke:#374151;stroke-width:2;rx:8;ry:8}.title{font:600 16px Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;fill:#f3f4f6}.subtitle{font:400 13px Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;fill:#9ca3af}.arrow{stroke:#60a5fa;stroke-width:2;marker-end:url(#arrowhead);fill:none}.badge{fill:#1f2937;stroke:#60a5fa;stroke-width:1;rx:6;ry:6}.badgeText{font:600 12px Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;fill:#bfdbfe}.caption{font:500 12px Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;fill:#93c5fd}.bg{fill:#0f172a}</style><marker id="arrowhead" markerHeight="7" markerWidth="10" orient="auto" refX="10" refY="3.5"><polygon fill="#60a5fa" points="0 0 10 3.5 0 7"/></marker></defs><rect width="800" height="800" x="0" y="0" class="bg"/><text x="30" y="40" class="title">Shorten URL â€“ MCP Integration Diagram</text><text x="30" y="62" class="subtitle">Diagram of how the MCP server interacts with the existing Next.js API</text><rect width="300" height="90" x="250" y="110" class="box"/><text x="270" y="145" class="title">MCP Client</text><text x="270" y="170" class="subtitle">AI / Editor / Agent</text><rect width="360" height="110" x="220" y="240" class="box"/><text x="240" y="275" class="title">MCP Server (mcp/src/server.ts)</text><text x="240" y="300" class="subtitle">Tools: shorten_url, get_count, add_domain, check_dns</text><rect width="150" height="24" x="240" y="310" class="badge"/><text x="248" y="327" class="badgeText">SHORTEN_URL_BASE</text><rect width="300" height="130" x="250" y="390" class="box"/><text x="270" y="420" class="title">ShortenURL API (v6)</text><text x="270" y="445" class="subtitle">/api/v26/shorten (POST)</text><text x="270" y="465" class="subtitle">/api/v26/count (GET)</text><text x="270" y="485" class="subtitle">/api/v26/domain?add= (GET)</text><text x="270" y="505" class="subtitle">/api/v26/dns?domain= (GET)</text><rect width="210" height="70" x="60" y="630" class="box"/><text x="80" y="660" class="title">Upstash Redis</text><text x="80" y="682" class="subtitle">Key storage for short links</text><rect width="210" height="70" x="295" y="630" class="box"/><text x="315" y="660" class="title">Vercel Domains API</text><text x="315" y="682" class="subtitle">Domain add via credentials</text><rect width="210" height="70" x="530" y="630" class="box"/><text x="550" y="660" class="title">Public DNS</text><text x="550" y="682" class="subtitle">A record check</text><path d="M400 200 L400 240" class="arrow"/><text x="410" y="220" class="caption">MCP tools</text><path d="M400 350 L400 390" class="arrow"/><text x="410" y="370" class="caption">HTTP</text><path d="M400 520 L400 590 L165 590 L165 630" class="arrow"/><text x="185" y="585" class="caption">Shorten / Count</text><path d="M400 520 L400 630" class="arrow"/><text x="410" y="605" class="caption">Domain</text><path d="M400 520 L400 590 L635 590 L635 630" class="arrow"/><text x="555" y="585" class="caption">DNS</text><text x="30" y="770" class="subtitle">Set SHORTEN_URL_BASE to point MCP to your running Next.js app (default http://localhost:3000).</text></svg>